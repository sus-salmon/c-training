# Руководство для Студентов: IO Test Framework

## Для чего нужен IO Test Framework?

IO Test Framework создан специально для **начинающих студентов**, которые:
- Еще не готовы к написанию чистых функций  
- Предпочитают работать с привычными `scanf` и `printf`
- Хотят тестировать программы так, как ими пользуются пользователи

## Когда использовать IO Tests?

✅ **Используйте IO Tests, если:**
- Вы изучаете основы C (ввод/вывод, условия, циклы)
- Ваша программа работает через `main()` с `scanf`/`printf`
- Вы хотите протестировать всю программу целиком
- Вам нужно проверить, как программа реагирует на пользовательский ввод

❌ **НЕ используйте IO Tests, если:**
- У вас есть отдельные функции, которые можно тестировать изолированно
- Программа сложная с множеством функций
- Вы изучаете продвинутые темы (указатели, структуры, алгоритмы)

## Как написать IO тест?

### Шаг 1: Создайте файл `имя-задачи.test.c`

```c
#include "../../../../third_party/io_test/io_test.h"

int main(void) {
    // Ваши тесты здесь
    
    IO_TEST_RUN_ALL("./build/имя-задачи");
    return 0;
}
```

### Шаг 2: Добавьте тесты

Каждый тест состоит из трех частей:

```c
IO_TEST_BEGIN("Понятное описание теста");
IO_TEST_INPUT("что_вводит_пользователь\n");
IO_TEST_EXPECT_OUTPUT("что_должна_вывести_программа\n");
IO_TEST_END();
```

### Шаг 3: Важные детали

#### ⚠️ Точность в выводе
Вывод должен **точно** совпадать с ожидаемым:
```c
// ПРАВИЛЬНО:
IO_TEST_EXPECT_OUTPUT("Введите число: Результат: 42\n");

// НЕПРАВИЛЬНО (лишний пробел):
IO_TEST_EXPECT_OUTPUT("Введите число:  Результат: 42\n");
```

#### ⚠️ Символы новой строки
Не забывайте `\n` в конце ввода и вывода:
```c
IO_TEST_INPUT("123\n");  // \n = нажатие Enter
IO_TEST_EXPECT_OUTPUT("Число: 123\n");
```

#### ⚠️ Множественный ввод
Для нескольких значений используйте несколько `\n`:
```c
IO_TEST_INPUT("5\n+\n3\n");  // 5, затем +, затем 3
```

## Полный пример

### Программа: `calculator.c`
```c
#include <stdio.h>

int main(void) {
    int a, b;
    char op;
    
    printf("Первое число: ");
    scanf("%d", &a);
    
    printf("Операция: ");
    scanf(" %c", &op);
    
    printf("Второе число: ");
    scanf("%d", &b);
    
    if (op == '+') {
        printf("Результат: %d\n", a + b);
    } else {
        printf("Неизвестная операция\n");
    }
    
    return 0;
}
```

### Тесты: `calculator.test.c`
```c
#include "../../../../third_party/io_test/io_test.h"

int main(void) {
    // Тест сложения
    IO_TEST_BEGIN("Сложение двух чисел");
    IO_TEST_INPUT("5\n+\n3\n");
    IO_TEST_EXPECT_OUTPUT("Первое число: Операция: Второе число: Результат: 8\n");
    IO_TEST_END();
    
    // Тест неизвестной операции
    IO_TEST_BEGIN("Неизвестная операция");
    IO_TEST_INPUT("5\n-\n3\n");
    IO_TEST_EXPECT_OUTPUT("Первое число: Операция: Второе число: Неизвестная операция\n");
    IO_TEST_END();
    
    IO_TEST_RUN_ALL("./build/calculator");
    return 0;
}
```

## Как запустить тесты?

```bash
# Собрать и запустить тесты
make test

# Если есть проблемы с форматированием
make format-fix

# Запустить программу вручную
./build/имя-программы
```

## Результаты тестов

При успешном прохождении вы увидите:
```
=== Запуск IO тестов для ./build/calculator ===
Всего тестов: 2

✓ ПРОЙДЕН Сложение двух чисел
✓ ПРОЙДЕН Неизвестная операция

=== Результаты ===
Пройдено: 2
Провалено: 0
Все тесты пройдены!
```

При ошибках:
```
✗ ПРОВАЛЕН Сложение двух чисел
  Ожидалось: "Результат: 8\n"
  Получено:  "Результат: 5\n"
```

## Советы

1. **Начните с простого** - напишите один тест, убедитесь, что он работает
2. **Проверьте вывод вручную** - запустите программу и посмотрите, что она выводит
3. **Копируйте точно** - скопируйте вывод программы в ожидаемый результат
4. **Тестируйте граничные случаи** - что если ввести 0? отрицательное число?
5. **Давайте понятные имена** - `"Деление на ноль"` лучше чем `"Тест 3"`

## Переход к Unity Tests

Когда вы будете готовы к более продвинутому тестированию, изучите Unity Tests - они позволяют тестировать отдельные функции независимо от пользовательского интерфейса.
